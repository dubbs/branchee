!function(n,e,a){function t(n,t){var s=n.find("."+t.classMenu),i=null,c=function(){var n=[t.classTransitionExitRight,t.classTransitionExitLeft,t.classTransitionEnterRight,t.classTransitionEnterLeft].join(" ");i.removeClass(n)},r=function(n){i.removeClass(t.classMenuPaneActive),n.addClass(t.classMenuPaneActive)},l=function(){var e=n.attr("id"),s=a('.branchee-toggle-menu[href="#'+e+'"]');s.toggleClass(t.classOpen),n.toggleClass(t.classOpen),c(),t.onAfterToggle.call(this,s)},o=function(e){e.preventDefault(),n.attr("id")===a(e.currentTarget).attr("href").substring(1)&&l()},d=function(e){e.preventDefault();var s=a(e.target),i=s.closest("."+t.classMenuPane),l=n.find("["+t.dataPaneId+'="'+s.data(t.classMenuPaneTarget)+'"]');c(),0!==s.closest("."+t.classBackLink).length?(i.addClass(t.classTransitionExitRight),l.addClass(t.classTransitionEnterLeft)):(i.addClass(t.classTransitionExitLeft),l.addClass(t.classTransitionEnterRight)),r(l)},u=function(){return Math.random().toString(36).slice(2)},f=function(){s.find("> ul").attr(t.dataPaneId,u())},h=function(n,e){a(e).addClass(t.classSection+" "+t.classSectionPrefix+(n+1)),a(e).find("ul").addClass(t.classSection+" "+t.classSectionPrefix+(n+1))},g=function(){s.children("ul").children("li").each(h)},v=function(n,e){var s=u();a(e).siblings("ul").attr(t.dataPaneId,s),a(e).append('<span class="'+t.classMenuPaneTarget+'" '+t.dataPaneTarget+'="'+s+'"></span>')},T=function(){var n=s.find("ul").parents("li").children("a");n.each(v)},P=function(){var e=n.attr("id"),t=a('.branchee-toggle-menu[href="#'+e+'"]');t.prepend('<span class="branchee-toggle-menu-icon"></span>')},b=function(n,e){var s=a(e).siblings("a").clone(),i=a(e).parents("ul").attr(t.dataPaneId);s.children("span").attr(t.dataPaneTarget,i),s.prependTo(a(e)).wrap("<li class='"+t.classBackLink+"'></li>")},p=function(){var n=s.find("["+t.dataPaneId+"]");n.each(b)},M=function(n,e){var i=a(e).clone();i.find("ul").remove();var c=a('<div class="'+t.classMenuPane+'"></div>');c.attr(t.dataPaneId,i.attr(t.dataPaneId)),i.removeAttr(t.dataPaneId).appendTo(s).wrap(c)},m=function(){var n=s.find("["+t.dataPaneId+"]");n.each(M),i=s.find("."+t.classMenuPane)},I=function(){s.find("> ul").remove()},x=function(e){var a=n.find("."+t.classBackLink+' [href="'+e+'"]');if(a.length){var s=a.closest("."+t.classMenuPane);return void r(s)}var i=n.find('[href="'+e+'"]');if(i.length){var s=i.closest("."+t.classMenuPane);return void r(s)}},E=function(){t.onBeforeInit.call(this),f(),g(),T(),P(),p(),m(),I(),r(i.first()),t.onAfterInit.call(this)};return n.on("click","."+t.classMenuPaneTarget,d),t.handleToggle&&a(e).on("click","."+t.classToggleMenu,o),{init:E,toggleOpen:l,clearTransitions:c,setActivePaneByHref:x}}a.fn.branchee=function(n){return n=a.extend({},a.fn.branchee.defaults,n),this.each(function(){var e=a(this),s=t(e,n).init();e.data("branchee",s)})},a.fn.branchee.defaults={handleToggle:!0,classBackLink:"branchee-back",classMenuItemActive:"branchee-menu-item-active",classMenuPaneActive:"branchee-menu-pane-active",classMenuPane:"branchee-menu-pane",classMenu:"branchee-menu",classOpen:"branchee-open",classMenuPaneTarget:"branchee-pane-target",classSection:"branchee-section",classSectionPrefix:"branchee-section--",classToggle:"branchee-toggle",classToggleExt:"branchee-toggle-ext",classToggleMenu:"branchee-toggle-menu",classTransitionEnterLeft:"branchee-transition-enterleft",classTransitionEnterRight:"branchee-transition-enterright",classTransitionExitLeft:"branchee-transition-exitleft",classTransitionExitRight:"branchee-transition-exitright",dataPaneId:"data-branchee-pane-id",dataPaneTarget:"data-branchee-pane-target",onBeforeInit:function(){},onAfterInit:function(){},onAfterToggle:function(){}}}(this,this.document,this.jQuery);