!function(n,e,a){function t(n,t){var s=n.find("."+t.classMenu),c=null,i=function(){var n=[t.classTransitionExitRight,t.classTransitionExitLeft,t.classTransitionEnterRight,t.classTransitionEnterLeft].join(" ");c.removeClass(n)},r=function(n){c.removeClass(t.classMenuPaneActive),n.addClass(t.classMenuPaneActive)},l=function(){var e=n.attr("id"),s=a('.branchee-toggle-menu[href="#'+e+'"]');s.toggleClass(t.classOpen),n.toggleClass(t.classOpen),i(),t.onAfterToggle.call(this,s)},o=function(e){e.preventDefault(),n.attr("id")===a(e.currentTarget).attr("href").substring(1)&&l()},d=function(e){e.preventDefault();var s=a(e.currentTarget),c=s.closest("."+t.classMenuPane),l=n.find("["+t.dataPaneId+'="'+s.data(t.classMenuPaneTarget)+'"]');i(),0!==s.closest("."+t.classBackLink).length?(c.addClass(t.classTransitionExitRight),l.addClass(t.classTransitionEnterLeft)):(c.addClass(t.classTransitionExitLeft),l.addClass(t.classTransitionEnterRight)),r(l)},u=function(){return Math.random().toString(36).slice(2)},f=function(){s.find("> ul").attr(t.dataPaneId,u())},h=function(n,e){a(e).addClass(t.classSection+" "+t.classSectionPrefix+(n+1)),a(e).find("ul").addClass(t.classSection+" "+t.classSectionPrefix+(n+1))},g=function(){s.children("ul").children("li").each(h)},p=function(n,e){var s=u(),c=a(e).siblings("ul");c.attr(t.dataPaneId,s);var i=a("<span></span>").append(t.templateIconArrowRight);i.addClass(t.classMenuPaneTarget),i.attr(t.dataPaneTarget,s),a(e).append(i)},v=function(){var n=s.find("ul").parents("li").children("a");n.each(p)},b=function(){var e=n.attr("id"),s=a('.branchee-toggle-menu[href="#'+e+'"]'),c=a('<span class="branchee-toggle-menu-icon-open"></span>').append(t.templateIconOpen),i=a('<span class="branchee-toggle-menu-icon-close"></span>').append(t.templateIconClose),r=a("<span></span>").addClass("branchee-toggle-menu-icon").append(c).append(i);s.prepend(r)},T=function(n,e){var s=a(e).siblings("a").clone(),c=a(e).parents("ul").attr(t.dataPaneId);s.children("span").attr(t.dataPaneTarget,c).html(t.templateIconArrowLeft),s.prependTo(a(e)).wrap("<li class='"+t.classBackLink+"'></li>")},P=function(){var n=s.find("["+t.dataPaneId+"]");n.each(T)},m=function(n,e){var c=a(e).clone();c.find("ul").remove();var i=a('<div class="'+t.classMenuPane+'"></div>');i.attr(t.dataPaneId,c.attr(t.dataPaneId)),c.removeAttr(t.dataPaneId).appendTo(s).wrap(i)},I=function(){var n=s.find("["+t.dataPaneId+"]");n.each(m),c=s.find("."+t.classMenuPane)},M=function(){s.find("> ul").remove()},C=function(e){var a=n.find("."+t.classBackLink+' [href="'+e+'"]');if(a.length){var s=a.closest("."+t.classMenuPane);return void r(s)}var c=n.find('[href="'+e+'"]');if(c.length){var s=c.closest("."+t.classMenuPane);return void r(s)}},x=function(){return t.onBeforeInit.call(this),f(),g(),v(),b(),P(),I(),M(),r(c.first()),t.onAfterInit.call(this),this};return n.on("click","."+t.classMenuPaneTarget,d),t.handleToggle&&a(e).on("click","."+t.classToggleMenu,o),{init:x,toggleOpen:l,clearTransitions:i,setActivePaneByHref:C}}a.fn.branchee=function(n){return n=a.extend({},a.fn.branchee.defaults,n),this.each(function(){var e=a(this),s=t(e,n).init();e.data("branchee",s)})},a.fn.branchee.defaults={handleToggle:!0,classBackLink:"branchee-back",classMenuItemActive:"branchee-menu-item-active",classMenuPaneActive:"branchee-menu-pane-active",classMenuPane:"branchee-menu-pane",classMenu:"branchee-menu",classOpen:"branchee-open",classMenuPaneTarget:"branchee-pane-target",classSection:"branchee-section",classSectionPrefix:"branchee-section--",classToggle:"branchee-toggle",classToggleExt:"branchee-toggle-ext",classToggleMenu:"branchee-toggle-menu",classTransitionEnterLeft:"branchee-transition-enterleft",classTransitionEnterRight:"branchee-transition-enterright",classTransitionExitLeft:"branchee-transition-exitleft",classTransitionExitRight:"branchee-transition-exitright",templateIconClose:'<span class="branchee-icon-close"></span>',templateIconOpen:'<span class="branchee-icon-open"></span>',templateIconArrowRight:'<span class="branchee-icon-arrow-right"></span>',templateIconArrowLeft:'<span class="branchee-icon-arrow-left"></span>',dataPaneId:"data-branchee-pane-id",dataPaneTarget:"data-branchee-pane-target",onBeforeInit:function(){},onAfterInit:function(){},onAfterToggle:function(){}}}(this,this.document,this.jQuery);